---
import { Tweet } from 'react-tweet';
import CaptionedElement from './CaptionedElement.astro';
import type { Post } from '../groq';

type NodeProps = Extract<Post['content'][number], { '_type': 'tweet' }>;

const { id, caption } : NodeProps = Astro.props.node;

const WrapperElement = caption ? CaptionedElement : Fragment;
---

<WrapperElement { ...caption && { caption } }>
    <Tweet id={ id } client:load />
</WrapperElement>
<style is:global>
    .react-tweet-theme {
        max-width: none;
        --tweet-bg-color: light-dark(#fff, var(--zinc-900));
        --tweet-bg-color-hover: var(--tweet-bg-color);
        --tweet-border: 1px solid light-dark(var(--zinc-200), var(--zinc-800));
        margin-block: 1.25rem 0.75rem;
    }
</style>